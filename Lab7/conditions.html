<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Invoice</h1>

<script>

state = "CA";                   // Retrieved from user profile
switch (state) {

    case 'HI':
        taxRate = 0.0417;
        break;
    case 'CA':
        taxRate = 0.08;
        break;
    case 'VT':
        taxRate = 0.0;
        break;
    default:
        taxRate = 0.02;
        break;

}

/* if (state == 'HI') {
    taxRate = 0.0417;

} */ 



/* this program contains a customer invoice
Date 25 Sep 2020
Author: David Liao
*/

var subTotal = 120;          // Sub_total from previous page
// TEST var taxRate = 0.05;         // state tax rate calculated from...
var grandTotal = 0;
var taxExempt = false;       // tax exempt status 
var subTotalOut = `Your sub-total is ${subTotal}`;
var taxOwing = 0;
var discountRate = 0.1;         // discount rate for tax exempt businesses
var taxOwing = subTotal * taxRate;

document.write(subTotalOut);
document.write('<br>');

if (taxExempt == true && subTotal > 100)    // calculate discount, if applicable
{
    discount = subTotal * discountRate;
    document.write(`Congratulations! You get a discount of $ ${discount}<BR>`);
    subTotal -= discount;
}


if (taxExempt == true) {    //Tax exempt; print message
    discount = subTotal * discountRate;
    document.write("You are tax exempt <BR>");
    document.write(`Congratulations! You get a discount of $ ${discount}<BR>`);
    subTotal = subTotal - discount;
}

else {                      // Calculate tax owing
    taxOwing = subTotal * taxRate;
    taxOut = taxOwing.toFixed(2);
    var taxOwingOut = `You owe $ ${taxOut} in tax <BR>`;
    document.write(taxOwingOut);
}

var grandTotal = subTotal + taxOwing;

var totalOut = `Your grand total is ${grandTotal}` + ".";
document.write(totalOut);


</script>

</body>
</html>